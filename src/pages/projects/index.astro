---
import { getCollection } from 'astro:content'
import Main from '../../layouts/Main.astro'
import Project from '../../components/Project.astro'
import '../../styles/projects.css'

const allProjects = await getCollection('projects')
// fixme: add a search func
---

<Main>
<h1>Projects</h1>
<ul>
{allProjects
  .sort(function(a, b){ return b.data.date - a.data.date })
  .map(p => (
    <li><Project
      projectType={p.data.type}
      title={p.data.title}
      date={p.data.date}
      link={p.slug}
      bio={p.data.description}
      tags={p.data.tags}
    /></li>
))}
</ul>
</Main>
